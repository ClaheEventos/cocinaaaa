{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Elegir Extras para {{ cliente.nombre }}</title>
    <link rel="stylesheet" href="{% static 'estilo.css' %}">
    <link rel="stylesheet" href="{% static 'navbar.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<nav class="navbar">
    <button class="menu-toggle" onclick="toggleMenu()">☰</button>
    <div class="nav-links" id="navLinks">
        <a href="{% url 'agregar_telefonos' cliente_id=cliente.id %}">Teléfonos</a>
    <a href="{% url 'elegir_cantidades' cliente_id=cliente.id %}">Cantidades</a>
    <a href="{% url 'elegir_islas' cliente_id=cliente.id %}">Islas</a>
    <a href="{% url 'elegir_islas_premium' cliente_id=cliente.id %}">Islas Premium</a>
    <a href="{% url 'elegir_barra_tragos' cliente_id=cliente.id %}">Barra de Tragos</a>
    <a href="{% url 'elegir_platos' cliente_id=cliente.id %}">Platos</a>
    <a href="{% url 'elegir_postres' cliente_id=cliente.id %}">Postres</a>
    <a href="{% url 'elegir_mesa_dulce_premium' cliente_id=cliente.id %}">Mesa Dulce Premium</a>
    <a href="{% url 'elegir_extras' cliente_id=cliente.id %}">Extras</a>
    <a href="{% url 'elegir_shows' cliente_id=cliente.id %}">Shows</a>
    <a href="{% url 'elegir_recepcion' cliente_id=cliente.id %}">Recepción</a>
    <a href="{% url 'elegir_fin_de_fiesta' cliente_id=cliente.id %}">Fin de Fiesta</a>
    </div>
</nav>

<h1>Extras</h1>

<form method="post">
    {% csrf_token %}

    {% for extra in extras_posibles %}
        <hr style="width: 100%; border: 1px solid #ffeb3b; margin: 30px auto;" />
        <div style="margin-bottom: 10px;">
            <label>
                <input type="checkbox" name="extras" value="{{ extra }}"
                       {% if extra in extras_ya_elegidos %}checked{% endif %}>
                {{ extra }}
            </label>

            <!-- Campo detalle para "4 letras luminosas" -->
            {% if extra == "4 letras luminosas" %}
                <input type="text" name="detalle_letras"
                       id="campoLetras"
                       placeholder="Ingrese las letras (ej: LOVE)"
                       style="display:none; margin-left: 10px;"
                       value="{{ detalle_letras_ya }}">
            
            <!-- Campo detalle para "chispas frías" -->
            {% elif extra == "chispas frías" %}
                <input type="text" name="detalle_chispas"
                       id="campoChispas"
                       placeholder="Ingrese detalle de chispas frías"
                       style="display:none; margin-left: 10px;"
                       value="{{ detalle_chispas_ya }}">
            
            <!-- Campo detalle para "Arco de globos" -->
            {% elif extra == "Arco de globos" %}
                <input type="text" name="detalle_arco"
                       id="campoArco"
                       placeholder="Ingrese el color del arco de globos"
                       style="display:none; margin-left: 10px;"
                       value="{{ detalle_arco_ya }}">
            {% endif %}
        </div>
    {% endfor %}

    <hr style="width: 100%; border: 1px solid #ffeb3b; margin: 30px auto;" />

    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
        <button type="button" onclick="history.back()">← Atrás</button>
        <button type="submit">Continuar</button>
    </div>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    // Letras
    const checkLetras = document.querySelector('input[value="4 letras luminosas"]');
    const campoLetras = document.getElementById("campoLetras");

    if (checkLetras && campoLetras) {
        function toggleCampoLetras() {
            campoLetras.style.display = checkLetras.checked ? "inline-block" : "none";
            if (!checkLetras.checked) campoLetras.value = "";
        }
        checkLetras.addEventListener("change", toggleCampoLetras);
        toggleCampoLetras();
    }

    // Chispas frías
    const checkChispas = document.querySelector('input[value="chispas frías"]');
    const campoChispas = document.getElementById("campoChispas");

    if (checkChispas && campoChispas) {
        function toggleCampoChispas() {
            campoChispas.style.display = checkChispas.checked ? "inline-block" : "none";
            if (!checkChispas.checked) campoChispas.value = "";
        }
        checkChispas.addEventListener("change", toggleCampoChispas);
        toggleCampoChispas();
    }

    // Arco de globos
    const checkArco = document.querySelector('input[value="Arco de globos"]');
    const campoArco = document.getElementById("campoArco");

    if (checkArco && campoArco) {
        function toggleCampoArco() {
            campoArco.style.display = checkArco.checked ? "inline-block" : "none";
            if (!checkArco.checked) campoArco.value = "";
        }
        checkArco.addEventListener("change", toggleCampoArco);
        toggleCampoArco();
    }
});
</script>

</body>
</html>