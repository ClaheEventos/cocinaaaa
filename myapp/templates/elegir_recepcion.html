{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Elegir Recepción</title>
    <link rel="stylesheet" href="{% static 'estilo.css' %}">
    <link rel="stylesheet" href="{% static 'navbar.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Estilo simple para los checkboxes y textarea */
        input[type="checkbox"] {
            margin-right: 8px;
        }
        .item-container {
            margin-bottom: 10px;
            border: 1px solid #ccc;
            padding: 8px;
            border-radius: 6px;
        }
    </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <button class="menu-toggle" onclick="toggleMenu()">☰</button>
    <div class="nav-links" id="navLinks">
        <a href="{% url 'agregar_telefonos' cliente_id=cliente.id %}">Teléfonos</a>
        <a href="{% url 'elegir_plan' cliente_id=cliente.id %}">Plan</a>
        <a href="{% url 'elegir_bebidas' cliente_id=cliente.id %}">Bebidas</a>
        <a href="{% url 'elegir_islas' cliente_id=cliente.id %}">Islas</a>
        <a href="{% url 'elegir_islas_premium' cliente_id=cliente.id %}">Islas Premium</a>
        <a href="{% url 'elegir_barra_tragos' cliente_id=cliente.id %}">Barra de Tragos</a>
        <a href="{% url 'elegir_platos' cliente_id=cliente.id %}">Platos</a>
        <a href="{% url 'elegir_postres' cliente_id=cliente.id %}">Postres</a>
        <a href="{% url 'elegir_mesa_dulce_premium' cliente_id=cliente.id %}">Mesa Dulce Premium</a>
        <a href="{% url 'elegir_extras' cliente_id=cliente.id %}">Extras</a>
        <a href="{% url 'elegir_shows' cliente_id=cliente.id %}">Shows</a>
        <a href="{% url 'elegir_recepcion' cliente_id=cliente.id %}">Recepción</a>
        <a href="{% url 'elegir_fin_de_fiesta' cliente_id=cliente.id %}">Fin de Fiesta</a>
    </div>
  </nav>

  <h1>Elegir categoría de Recepción</h1>

  <form method="post">
      {% csrf_token %}

      <!-- Radios para elegir categoría -->
      {% for categoria, items in categorias.items %}
          <label>
              <input type="radio" name="categoria_recepcion" value="{{ categoria }}"
                     onclick="mostrarItems('{{ categoria|escapejs }}')"
                     {% if categoria == categoria_seleccionada %}checked{% endif %}>
              {{ categoria }}
          </label><br/>
      {% endfor %}

      <!-- Contenedor dinámico de ítems -->
      <div id="items_categoria" style="margin-top: 20px;"></div>

      <div style="margin-top: 20px;">
          <button type="button" onclick="history.back()">← Atrás</button>
          <button type="submit">Continuar</button>
      </div>
  </form>

  <script>
      const categoriasItems = {{ categorias|safe }};

      function mostrarItems(categoria) {
          const contenedor = document.getElementById("items_categoria");
          const items = categoriasItems[categoria];

          let html = "<h3>Items de " + categoria + ":</h3>";

          items.forEach(item => {
              const safeName = item.replace(/\s+/g, "_").replace(/[()]/g, "");
              html += `
                  <div class="item-container">
                      <label>
                          <input type="checkbox" name="items_seleccionados" value="${item}" checked>
                          ${item}
                      </label>
                  </div>
              `;
          });

          contenedor.innerHTML = html;
      }

      // Mostrar la categoría seleccionada al cargar la página
      window.onload = function() {
          {% if categoria_seleccionada %}
              mostrarItems("{{ categoria_seleccionada|escapejs }}");
          {% endif %}
      };

      function toggleMenu() {
          document.getElementById('navLinks').classList.toggle('show');
      }
  </script>
</body>
</html>