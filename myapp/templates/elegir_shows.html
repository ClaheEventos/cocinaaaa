{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Elegir Shows para {{ cliente.nombre }}</title>
    <link rel="stylesheet" href="{% static 'estilo.css' %}">
    <link rel="stylesheet" href="{% static 'navbar.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<nav class="navbar">
    <button class="menu-toggle" onclick="toggleMenu()">☰</button>
    <div class="nav-links" id="navLinks">
<a href="{% url 'agregar_telefonos' cliente_id=cliente.id %}">Teléfonos</a>
    <a href="{% url 'elegir_cantidades' cliente_id=cliente.id %}">Cantidades</a>
    <a href="{% url 'elegir_islas' cliente_id=cliente.id %}">Islas</a>
    <a href="{% url 'elegir_islas_premium' cliente_id=cliente.id %}">Islas Premium</a>
    <a href="{% url 'elegir_barra_tragos' cliente_id=cliente.id %}">Barra de Tragos</a>
    <a href="{% url 'elegir_platos' cliente_id=cliente.id %}">Platos</a>
    <a href="{% url 'elegir_postres' cliente_id=cliente.id %}">Postres</a>
    <a href="{% url 'elegir_mesa_dulce_premium' cliente_id=cliente.id %}">Mesa Dulce Premium</a>
    <a href="{% url 'elegir_extras' cliente_id=cliente.id %}">Extras</a>
    <a href="{% url 'elegir_shows' cliente_id=cliente.id %}">Shows</a>
    <a href="{% url 'elegir_recepcion' cliente_id=cliente.id %}">Recepción</a>
    <a href="{% url 'elegir_fin_de_fiesta' cliente_id=cliente.id %}">Fin de Fiesta</a>
    </div>
</nav>

<h1>Shows</h1>

<form method="post">
    {% csrf_token %}

{% for show in shows_posibles %}
    <hr style="width: 100%; border: 1px solid #ffeb3b; margin: 30px auto;" />
    <div style="margin-bottom:10px;">
        <label>
            <input type="checkbox" name="shows" value="{{ show }}"
                   {% if show in shows_ya_elegidos %}checked{% endif %}>
            {{ show }}
        </label>

        {% for s, safe_name in shows_con_detalle_tpl %}
            {% if show == s %}
                <input type="text"
                       name="detalle_{{ safe_name }}"
                       placeholder="Ingrese el personaje"
                       style="display:none; margin-left: 10px;"
                       value="{{ detalles_guardados.s|default:'' }}"
                       class="campoDetalle">
            {% endif %}
        {% endfor %}
    </div>
{% endfor %}

    <hr style="width: 100%; border: 1px solid #ffeb3b; margin: 30px auto;" />
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
        <button type="button" onclick="history.back()">← Atrás</button>
        <button type="submit">Continuar</button>
    </div>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const checkboxes = document.querySelectorAll('input[type="checkbox"][name="shows"]');
    checkboxes.forEach(cb => {
        const campo = cb.closest("div").querySelector(".campoDetalle");
        if (campo) {
            function toggleCampo() {
                campo.style.display = cb.checked ? "inline-block" : "none";
                if(!cb.checked) campo.value = "";
            }
            cb.addEventListener("change", toggleCampo);
            toggleCampo(); // estado inicial
        }
    });
});
</script>

</body>
</html>
